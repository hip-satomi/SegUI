<div [class.ion-hide]="!show">
  <ion-toolbar>SegPropTool
    <ion-button slot='end' (click)="close()">
      <ion-icon name="close-outline"></ion-icon>
    </ion-button>
  </ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-item>
          <ion-label>Model</ion-label>
          <ion-select placeholder="Select One" [(ngModel)]=selectedModel >
            <ion-select-option *ngFor="let model of segmentationModels$ | async; index as i" value="{{i}}">{{model.name}}</ion-select-option>
            <!--<ion-select-option value="m">Male</ion-select-option>-->
          </ion-select>
        </ion-item>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-button [disabled]="!selectedModel" color="secondary" (click)="requestProposals()">
            Request Proposals
          </ion-button>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>Total Detections:</ion-col>
        <ion-col *ngIf="data; else noDet">{{data.length}}</ion-col>
        <ng-template #noDet><ion-col>-</ion-col></ng-template>
      </ion-row>
      <ion-row>
        <ion-col>Filtered Detections:</ion-col>
        <ion-col *ngIf="localSegModel; else noFiltDet">{{ numFilteredDets }}</ion-col>
        <ng-template #noFiltDet><ion-col>-</ion-col></ng-template>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-label>Show Existing Overlay</ion-label>
        </ion-col>
        <ion-col>
          <ion-checkbox (ionChange)="update($event)" [(ngModel)]="showOverlay"></ion-checkbox>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-label>Show New Overlay</ion-label>
        </ion-col>
        <ion-col>
          <ion-checkbox (ionChange)="update($event)" [(ngModel)]="showNewOverlay"></ion-checkbox>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="vertical-align-content">
          <ion-label style="text-align: center;">Threshold: {{scoreThreshold | number:'1.2-2'}}</ion-label>
        </ion-col>
        <ion-col size="12">
          <ion-range  min="0" max="1" step="0.05" snaps="true" [(ngModel)]="scoreThreshold" (ionChange)="nmsChange()" pin="true" style="padding: 0px;">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1</ion-label>
          </ion-range>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-label>Filter Overlaps</ion-label>
        </ion-col>
        <ion-col>
          <ion-checkbox (ionChange)="nmsChange()" [(ngModel)]="filterOverlaps"></ion-checkbox>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="auto">Simplify error: {{simplifyError | number:'1.2-2'}}</ion-col>
        <ion-col size="12">
          <ion-range min="0" max="5" step="0.01" snaps="true" [(ngModel)]="simplifyError" (ionChange)="simplifyErrorChanged()" style="padding: 0px;">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">5</ion-label>
          </ion-range>
        </ion-col>
        <!--<ion-col size="3">
          <ion-input type="number" [(ngModel)]="simplifyError"></ion-input>
        </ion-col>-->
      </ion-row>
      <ion-row>
        <ion-item>
          <ion-label>Predicted Labels</ion-label>
          <ion-checkbox [(ngModel)]="useLabels" slot="end"></ion-checkbox>
        </ion-item>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-button expand="block" (click)="commit()">Commit</ion-button>
        </ion-col>
      </ion-row>
  </ion-grid>
</div>